Подход (MVP)
- GUI:
  - Вариант A (Resolve Studio): встроенный UI через UI Manager
  - Вариант B (Resolve Free): внешнее PyQt-окно
  - Элементы: Analyze, Stop, логотип/анимация, окно логов

- Алгоритм анализа (алгоритмический метод без «тяжёлого» ML):
  1) Sampling: по каждому клипу несколько кадров (начало/середина/конец), фильтрация вспышек/пересветов; для длинных клипов — равномерная сетка.
  2) Feature Extraction: агрегированные статистики по каналам (медианы/квантили/дисперсии), насыщенность/яркость, простые частотные и контрастные признаки; эвристики для Log vs Rec709; детектор чёрных рамок; индикаторы «fish-eye».
  3) Clustering: HDBSCAN (устойчив к форме кластеров) либо fallback k-means (с определением k по silhouette score); пост-агрегация по клипу majority vote.
  4) Mapping: кластеры → цветовые метки клипов в Resolve (фиксированная палитра).

- Интеграция с Resolve:
  - Чтение списка клипов активного таймлайна
  - Запись clip color/групп
  - Маркировка run-id для Undo (идемпотентность)

- Расширение (Beta):
  - ML-валидация (OpenCLIP/DINO) в отдельном процессе/venv через IPC
  - Только «re-check», не блокер MVP

Архитектура (компоненты)
- UI (встроенный или внешнее PyQt)
- Controller (управление потоками, Stop, сбор логов)
- Sampler (выбор кадров, анти-flash фильтр)
- FeatureExtractor (устойчивые фичи и эвристики)
- Clusterer (HDBSCAN/k-means)
- ResolveAdapter (API доступа к таймлайну/цветам, Undo по run-id)
- Logger (прогресс, предупреждения, отчёт)

Производительность
- Цель: ≤30 секунд на ~20 минут материала после Autodetect Cut (средняя машина)
- Настройки: частота сэмплов, размерность фич; ранняя остановка по устойчивости кластеров

Ошибкоустойчивость
- Stop прерывает пайплайн мягко, незавершённые клипы не маркируются
- При ошибке: лог + таймлайн без изменений
- Повторный запуск с тем же run-id не дублирует маркировки

Дистрибуция
- Пакет Resolve-скрипта + внешний пакет (PyQt/ML) с простым инсталлером и readme
- Лицензии PyQt/моделей — проверить и приложить